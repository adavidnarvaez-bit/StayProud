<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StayProud – Alojamientos</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f8f8f8;
    }

    .card {
      background: white;
      padding: 25px;
      margin: 25px auto;
      width: 90%;
      max-width: 1100px;
      border-radius: 15px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.08);
    }

    .card h2 {
      margin-top: 0;
      font-size: 22px;
      color: #00bfa6;
    }

    /* --- SERVICIOS / CHECKBOXES --- */

    .services-columns {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 24px;
      margin-top: 16px;
    }

    .services-group h3 {
      margin-bottom: 10px;
      font-size: 16px;
      font-weight: 600;
      color: #008a7d;
    }

    .check-option {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      font-size: 14px;
      cursor: pointer;
    }

    .check-option input {
      display: none;
    }

    .check-custom {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      border: 2px solid #00bfa6;
      box-sizing: border-box;
      position: relative;
    }

    .check-option input:checked + .check-custom {
      background: #00bfa6;
    }

    .check-option input:checked + .check-custom::after {
      content: "";
      position: absolute;
      left: 5px;
      top: 1px;
      width: 5px;
      height: 10px;
      border: 2px solid #fff;
      border-top: none;
      border-left: none;
      transform: rotate(45deg);
    }

    .stars {
      color: #f5b400;
      font-size: 18px;
    }

    .counter-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 10px;
    }

    .counter-label {
      font-size: 14px;
    }

    .counter-controls {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .qty-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid #00bfa6;
      background: #fff;
      font-size: 18px;
      line-height: 1;
      cursor: pointer;
    }

    .qty-btn:hover {
      background: #00bfa6;
      color: #fff;
    }

    .counter-controls span {
      min-width: 18px;
      text-align: center;
    }

    /* Botón comprobar disponibilidad */

    .btn-disponibilidad {
      margin-top: 20px;
      display: inline-block;
      padding: 10px 22px;
      border-radius: 25px;
      background: #00bfa6;
      color: #fff;
      border: none;
      cursor: pointer;
      font-size: 15px;
    }

    .btn-disponibilidad:hover {
      opacity: 0.9;
    }

    /* --- CALENDARIO --- */

    .calendar-card {
      margin-top: 10px;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 3px 12px rgba(0,0,0,0.05);
      padding: 20px 24px 24px;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .calendar-header h3 {
      margin: 0;
      font-size: 18px;
      color: #00bfa6;
    }

    .calendar-nav button {
      border: none;
      background: #00bfa6;
      color: #fff;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 18px;
      cursor: pointer;
    }

    .calendar-nav button:hover {
      opacity: 0.9;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 6px;
      margin-top: 8px;
    }

    .calendar-weekday {
      text-align: center;
      font-size: 12px;
      font-weight: bold;
      color: #777;
      padding-bottom: 4px;
    }

    .calendar-day {
      position: relative;
      height: 42px;
      border-radius: 10px;
      background: #ffffff;
      border: 1px solid #e0e0e0;
      font-size: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: 0.15s;
    }

    .calendar-day.disabled {
      background: #f0f0f0;
      color: #b0b0b0;
      cursor: default;
    }

    .calendar-day:hover:not(.disabled) {
      box-shadow: 0 0 0 2px rgba(0,191,166,0.3);
    }

    .calendar-day.free {
      background: #ffffff;
      color: #333;
    }

    .calendar-day.inquiry {
      background: #ffe66b;
      color: #333;
      border-color: #ffd54f;
    }

    .calendar-day.reserved {
      background: #00bfa6;
      color: #ffffff;
      border-color: #00bfa6;
      font-weight: bold;
    }

    .calendar-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 16px;
      font-size: 13px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .legend-color {
      width: 16px;
      height: 16px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .legend-free  { background: #ffffff; }
    .legend-inquiry { background: #ffe66b; border-color: #ffd54f; }
    .legend-reserved { background: #00bfa6; border-color: #00bfa6; }

    .hidden {
      display: none;
    }

    @media (max-width: 480px) {
      .card {
        padding: 18px;
      }
      .calendar-day {
        height: 36px;
        font-size: 12px;
      }
    }
  </style>
</head>

<body>

<!-- TARJETA DE ALOJAMIENTO / SERVICIOS -->
<section class="card">
  <h2>Servicios de la habitación</h2>

  <!-- SERVICIOS + COMIDAS -->
  <div class="services-columns">

    <div class="services-group">
      <h3>Servicios</h3>

      <label class="check-option"><input type="checkbox" value="Gimnasio"><span class="check-custom"></span><span>Gimnasio</span></label>
      <label class="check-option"><input type="checkbox" value="Wifi"><span class="check-custom"></span><span>Wifi</span></label>
      <label class="check-option"><input type="checkbox" value="Hidromasaje"><span class="check-custom"></span><span>Hidromasaje</span></label>
      <label class="check-option"><input type="checkbox" value="PiscinaExterior"><span class="check-custom"></span><span>Piscina al aire libre</span></label>
      <label class="check-option"><input type="checkbox" value="PiscinaInterior"><span class="check-custom"></span><span>Piscina interior</span></label>
      <label class="check-option"><input type="checkbox" value="Restaurante"><span class="check-custom"></span><span>Restaurante</span></label>
      <label class="check-option"><input type="checkbox" value="Bar"><span class="check-custom"></span><span>Bar</span></label>
      <label class="check-option"><input type="checkbox" value="PlayaPrivada"><span class="check-custom"></span><span>Playa privada</span></label>
      <label class="check-option"><input type="checkbox" value="PrimeraLinea"><span class="check-custom"></span><span>Primera línea de playa</span></label>
      <label class="check-option"><input type="checkbox" value="Sauna"><span class="check-custom"></span><span>Sauna</span></label>
    </div>

    <div class="services-group">
      <h3>Comidas</h3>

      <label class="check-option"><input type="checkbox" value="SoloDesayuno"><span class="check-custom"></span><span>Solo desayuno</span></label>
      <label class="check-option"><input type="checkbox" value="DesayunoCena"><span class="check-custom"></span><span>Desayuno y cena</span></label>
      <label class="check-option"><input type="checkbox" value="PensionCompleta"><span class="check-custom"></span><span>Pensión completa</span></label>
    </div>

  </div>

  <!-- ACCESO + BIENVENIDO -->
  <div class="services-columns">

    <div class="services-group">
      <h3>Acceso</h3>

      <label class="check-option"><input type="checkbox" value="Ascensor"><span class="check-custom"></span><span>Ascensor</span></label>
      <label class="check-option"><input type="checkbox" value="Aparcamiento"><span class="check-custom"></span><span>Aparcamiento</span></label>
      <label class="check-option"><input type="checkbox" value="AccesoRuedas"><span class="check-custom"></span><span>Acceso en silla de ruedas</span></label>
    </div>

    <div class="services-group">
      <h3>Bienvenido</h3>

      <label class="check-option"><input type="checkbox" value="RopaOpcional"><span class="check-custom"></span><span>Ropa opcional aceptada</span></label>
      <label class="check-option"><input type="checkbox" value="Fumar"><span class="check-custom"></span><span>Se permite fumar</span></label>
      <label class="check-option"><input type="checkbox" value="Mascotas"><span class="check-custom"></span><span>Mascotas OK</span></label>
      <label class="check-option"><input type="checkbox" value="Familias"><span class="check-custom"></span><span>Niños y familias OK</span></label>
      <label class="check-option"><input type="checkbox" value="SoloAdultos"><span class="check-custom"></span><span>Solo para adultos</span></label>
    </div>

  </div>

  <!-- HABITACIONES + ESTRELLAS -->
  <div class="services-columns">

    <div class="services-group">
      <h3>Habitaciones</h3>

      <div class="counter-row">
        <div class="counter-label">Habitaciones</div>
        <div class="counter-controls">
          <button class="qty-btn" onclick="changeQty('rooms', -1)">−</button>
          <span id="rooms-value">1</span>
          <button class="qty-btn" onclick="changeQty('rooms', 1)">+</button>
          <input type="hidden" id="rooms-input" value="1">
        </div>
      </div>

      <div class="counter-row">
        <div class="counter-label">Camas</div>
        <div class="counter-controls">
          <button class="qty-btn" onclick="changeQty('beds', -1)">−</button>
          <span id="beds-value">1</span>
          <button class="qty-btn" onclick="changeQty('beds', 1)">+</button>
          <input type="hidden" id="beds-input" value="1">
        </div>
      </div>

      <div class="counter-row">
        <div class="counter-label">Baños</div>
        <div class="counter-controls">
          <button class="qty-btn" onclick="changeQty('baths', -1)">−</button>
          <span id="baths-value">1</span>
          <button class="qty-btn" onclick="changeQty('baths', 1)">+</button>
          <input type="hidden" id="baths-input" value="1">
        </div>
      </div>
    </div>

    <div class="services-group">
      <h3>Valoración</h3>

      <label class="check-option"><input type="radio" name="rating" value="0" checked><span class="check-custom"></span><span>No calificado</span></label>
      <label class="check-option"><input type="radio" name="rating" value="1"><span class="check-custom"></span><span class="stars">★</span></label>
      <label class="check-option"><input type="radio" name="rating" value="2"><span class="check-custom"></span><span class="stars">★★</span></label>
      <label class="check-option"><input type="radio" name="rating" value="3"><span class="check-custom"></span><span class="stars">★★★</span></label>
      <label class="check-option"><input type="radio" name="rating" value="4"><span class="check-custom"></span><span class="stars">★★★★</span></label>
      <label class="check-option"><input type="radio" name="rating" value="5"><span class="check-custom"></span><span class="stars">★★★★★</span></label>
    </div>

  </div>

  <!-- BOTÓN PARA MOSTRAR CALENDARIO -->
  <button type="button" class="btn-disponibilidad" id="btn-disponibilidad">
    Comprobar disponibilidad
  </button>

  <!-- CALENDARIO (INICIALMENTE OCULTO) -->
  <div id="calendar-wrapper" class="calendar-card hidden">
    <div class="calendar-header">
      <h3 id="calendar-month-year">Calendario de disponibilidad</h3>
      <div class="calendar-nav">
        <button id="prev-month">&lt;</button>
        <button id="next-month">&gt;</button>
      </div>
    </div>

    <div class="calendar-grid" id="calendar-grid">
      <!-- JS rellena aquí -->
    </div>

    <div class="calendar-legend">
      <div class="legend-item">
        <span class="legend-color legend-free"></span>
        <span>Libre</span>
      </div>
      <div class="legend-item">
        <span class="legend-color legend-inquiry"></span>
        <span>Consulta / interesado</span>
      </div>
      <div class="legend-item">
        <span class="legend-color legend-reserved"></span>
        <span>Reservado</span>
      </div>
    </div>
  </div>

</section>

<script>
  // CONTADORES HABITACIÓN / CAMAS / BAÑOS
  function changeQty(field, delta) {
    const valueSpan = document.getElementById(field + '-value');
    const hiddenInput = document.getElementById(field + '-input');
    let value = parseInt(valueSpan.textContent);

    value += delta;
    if (value < 0) value = 0;

    valueSpan.textContent = value;
    hiddenInput.value = value;
  }

  // CALENDARIO
  const STAYPROUD_COLOR = "#00bfa6";

  const initialReserved = [
    // ejemplo: "2025-11-15", "2025-11-16"
  ];

  const initialInquiry = [
    // ejemplo: "2025-11-20"
  ];

  const dateStates = {};

  function setInitialStates() {
    initialReserved.forEach(d => dateStates[d] = "reserved");
    initialInquiry.forEach(d => dateStates[d] = "inquiry");
  }

  let currentDate = new Date();
  currentDate.setDate(1);

  const monthNames = [
    "enero","febrero","marzo","abril","mayo","junio",
    "julio","agosto","septiembre","octubre","noviembre","diciembre"
  ];

  const weekDays = ["L","M","X","J","V","S","D"];

  const monthYearLabel = document.getElementById("calendar-month-year");
  const grid = document.getElementById("calendar-grid");

  function renderCalendar() {
    grid.innerHTML = "";

    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();

    monthYearLabel.textContent = Disponibilidad – ${monthNames[month]} ${year};

    weekDays.forEach(d => {
      const el = document.createElement("div");
      el.className = "calendar-weekday";
      el.textContent = d;
      grid.appendChild(el);
    });

    const firstDay = new Date(year, month, 1);
    const lastDay  = new Date(year, month + 1, 0);

    let startIndex = firstDay.getDay(); // 0=domingo
    if (startIndex === 0) startIndex = 7;
    const daysInMonth = lastDay.getDate();

    for (let i = 1; i < startIndex; i++) {
      const empty = document.createElement("div");
      empty.className = "calendar-day disabled";
      grid.appendChild(empty);
    }

    for (let day = 1; day <= daysInMonth; day++) {
      const cellDate = new Date(year, month, day);
      const isoDate  = cellDate.toISOString().split("T")[0];

      const dayEl = document.createElement("div");
      dayEl.classList.add("calendar-day");

      const state = dateStates[isoDate] || "free";
      dayEl.classList.add(state);

      dayEl.textContent = day;
      dayEl.dataset.date = isoDate;

      dayEl.addEventListener("click", () => onDayClick(isoDate, dayEl));

      grid.appendChild(dayEl);
    }
  }

  function onDayClick(isoDate, el) {
    const currentState = dateStates[isoDate] || "free";
    let nextState;

    if (currentState === "free") {
      nextState = "inquiry";
    } else if (currentState === "inquiry") {
      nextState = "reserved";
    } else {
      nextState = "free";
    }

    dateStates[isoDate] = nextState;

    el.classList.remove("free", "inquiry", "reserved");
    el.classList.add(nextState);

    console.log("Estado actualizado:", isoDate, nextState);
  }

  document.getElementById("prev-month").addEventListener("click", () => {
    currentDate.setMonth(currentDate.getMonth() - 1);
    renderCalendar();
  });

  document.getElementById("next-month").addEventListener("click", () => {
    currentDate.setMonth(currentDate.getMonth() + 1);
    renderCalendar();
  });

  // Mostrar / ocultar calendario con el botón "Comprobar disponibilidad"
  const btnDisp = document.getElementById("btn-disponibilidad");
  const calendarWrapper = document.getElementById("calendar-wrapper");

  btnDisp.addEventListener("click", () => {
    calendarWrapper.classList.toggle("hidden");
    if (!calendarWrapper.classList.contains("hidden")) {
      // por si quieres hacer scroll automático
      calendarWrapper.scrollIntoView({ behavior: "smooth" });
    }
  });

  setInitialStates();
  renderCalendar();
</script>

</body>
</html>